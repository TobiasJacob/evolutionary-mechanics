<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8"/>
    <title>Evolutionary mechanics</title>
    <script type="text/javascript">
      function draw() {
        var canvas = document.getElementById('tutorial');
        var ctx = canvas.getContext('2d');
        ctx.fillStyle = "white";
        ctx.fillRect(0, 0, canvas.width, canvas.height);

        // Paste output here
        const field = [[1, 1, 1, 1, 1, 1, 1, 1, 1, 1], [1, 1, 1, 1, 1, 1, 1, 1, 1, 1], [1, 1, 1, 1, 1, 1, 1, 1, 1, 1], [1, 1, 1, 1, 1, 1, 1, 1, 1, 1], [1, 1, 1, 1, 1, 1, 1, 1, 1, 1], [1, 1, 1, 1, 1, 1, 1, 1, 1, 1], [1, 1, 1, 1, 1, 1, 1, 1, 1, 1], [1, 1, 1, 1, 1, 1, 1, 1, 1, 1], [1, 1, 1, 1, 1, 1, 1, 1, 1, 1], [1, 1, 1, 1, 1, 1, 1, 1, 1, 1]];
        const u = [-4.54336e-05, -0.0113771, -0.0113445, 0.0116704, 0.0116495, -4.54426e-05, -0.0115709, 0.0240473, 0.0237593, -0.000430968, -0.012202, 0.0368111, 0.0361312, -0.00156725, -0.0133331, 0.049524, 0.0483328, -0.00382348, -0.0150246, 0.06153, 0.0596916, -0.00759842, -0.01726, 0.0717706, 0.069142, -0.013348, -0.0198445, 0.0784201, 0.0748945, -0.0215349, -0.0222395, 0.078113, 0.0736941, -0.0323778, -0.0236838, 0.0641821, 0.058401, -0.0448365, -0.0355402, 0.0382827, -0.0504695, -0.000407736, -0.0223983, -0.0220922, 0.0113639, -0.0219153, 0.023898, -0.021833, 0.0368144, -0.0217815, 0.0496672, -0.0216798, 0.0618194, -0.021424, 0.0722618, -0.020928, 0.0793619, -0.0204729, 0.0807388, -0.022923, 0.0756662, -0.0326199, 0.0664585, -0.00134746, -0.0334312, -0.0328297, 0.0106047, -0.0322588, 0.0232377, -0.0315549, 0.036157, -0.0305927, 0.0489715, -0.0293042, 0.061157, -0.0277387, 0.0719423, -0.0262518, 0.080294, -0.0260273, 0.0854406, -0.0290368, 0.087584, -0.0371525, 0.0884416, -0.00285225, -0.0449286, -0.0441157, 0.00944833, -0.0432737, 0.0221711, -0.0421662, 0.0350329, -0.0406684, 0.0477871, -0.0387909, 0.0601328, -0.0367763, 0.0716911, -0.0352834, 0.0821118, -0.0354653, 0.0912554, -0.0386952, 0.0993128, -0.0458326, 0.106817, -0.00471285, -0.0572432, -0.056358, 0.00805755, -0.0554125, 0.0208797, -0.0541543, 0.0336784, -0.052482, 0.0464186, -0.0504674, 0.0590855, -0.0484407, 0.0717177, -0.047081, 0.084451, -0.0474101, 0.0974794, -0.050565, 0.110785, -0.0571655, 0.123538, -0.00661336, -0.0705268, -0.0697241, 0.00664596, -0.0688538, 0.0195657, -0.0676993, 0.032312, -0.0661802, 0.0450743, -0.0643688, 0.0581187, -0.062551, 0.0718472, -0.061297, 0.0868113, -0.0615052, 0.103561, -0.0643332, 0.122072, -0.0707114, 0.140248, -0.00822246, -0.0846802, -0.084094, 0.0054287, -0.0834713, 0.0184269, -0.0826774, 0.0311342, -0.0816471, 0.0439191, -0.0804036, 0.057272, -0.0791039, 0.0719018, -0.0781169, 0.0887801, -0.0781623, 0.109018, -0.0805127, 0.13318, -0.0869189, 0.15863, -0.00928998, -0.0993458, -0.0990498, 0.00457635, -0.0988178, 0.0176425, -0.0986334, 0.030349, -0.0984674, 0.0431589, -0.0983066, 0.0567065, -0.0981661, 0.071929, -0.0981443, 0.0902098, -0.0986176, 0.113476, -0.100783, 0.143907, -0.107649, 0.180847, -0.00975104, -0.113968, -0.113929, 0.0041669, -0.114132, 0.0173398, -0.1147, 0.0301441, -0.115732, 0.0430696, -0.117299, 0.056805, -0.119416, 0.0724001, -0.122019, 0.0915375, -0.125053, 0.117034, -0.129137, 0.153899, -0.138619, 0.21057, -0.00981092, -0.128016, -0.128027, 0.00412613, -0.128399, 0.0174744, -0.129506, 0.0305604, -0.131702, 0.0438622, -0.135359, 0.0580687, -0.140888, 0.0742494, -0.148731, 0.0942013, -0.159381, 0.121325, -0.174048, 0.163888, -0.206705, 0.261247];
        const cornerIndexRow = [[0, 5, 9, 13, 17, 21, 25, 29, 33, 37, 0], [1, 4, 8, 12, 16, 20, 24, 28, 32, 36, 40], [42, 45, 47, 49, 51, 53, 55, 57, 59, 61, 63], [64, 67, 69, 71, 73, 75, 77, 79, 81, 83, 85], [86, 89, 91, 93, 95, 97, 99, 101, 103, 105, 107], [108, 111, 113, 115, 117, 119, 121, 123, 125, 127, 129], [130, 133, 135, 137, 139, 141, 143, 145, 147, 149, 151], [152, 155, 157, 159, 161, 163, 165, 167, 169, 171, 173], [174, 177, 179, 181, 183, 185, 187, 189, 191, 193, 195], [196, 199, 201, 203, 205, 207, 209, 211, 213, 215, 217], [218, 221, 223, 225, 227, 229, 231, 233, 235, 237, 239]];
        const cornerIndexCol = [[0, 6, 10, 14, 18, 22, 26, 30, 34, 38, 41], [2, 3, 7, 11, 15, 19, 23, 27, 31, 35, 39], [43, 44, 46, 48, 50, 52, 54, 56, 58, 60, 62], [65, 66, 68, 70, 72, 74, 76, 78, 80, 82, 84], [87, 88, 90, 92, 94, 96, 98, 100, 102, 104, 106], [109, 110, 112, 114, 116, 118, 120, 122, 124, 126, 128], [131, 132, 134, 136, 138, 140, 142, 144, 146, 148, 150], [153, 154, 156, 158, 160, 162, 164, 166, 168, 170, 172], [175, 176, 178, 180, 182, 184, 186, 188, 190, 192, 194], [197, 198, 200, 202, 204, 206, 208, 210, 212, 214, 216], [219, 220, 222, 224, 226, 228, 230, 232, 234, 236, 238]];
        const supports = {SupportRow1: { row: 0, col: 0}, SupportRow2: { row: 0, col: 10}, SupportCol: { row: 0, col: 0}}; 
        const forces = [{ attackCorner: { row: 10, col: 10}, forceRow: 10, forceCol:0}]
        // Paste output here

        const rows = field.length;
        const cols = field[0].length;
        const offsetX = 100;
        const offsetY = 100;
        
        const rectSize = 80;
        const movementScale = 1;

        function coordsToView(x, y) {
          return [offsetX + rectSize * x, offsetY + rectSize * y];
        }

        ctx.strokeStyle = '#000';
        for (let r = 0; r < rows; r++) {
          for (let c = 0; c < cols; c++) {
            if (field[r][c]) {
              ctx.beginPath();
              ctx.moveTo(...coordsToView(r + movementScale * u[cornerIndexRow[r][c] - 1], c + movementScale * u[cornerIndexCol[r][c] - 1]));
              ctx.lineTo(...coordsToView((r + 1) + movementScale * u[cornerIndexRow[r + 1][c] - 1], c + movementScale * u[cornerIndexCol[r + 1][c] - 1]));
              ctx.lineTo(...coordsToView((r + 1) + movementScale * u[cornerIndexRow[r + 1][c + 1] - 1], (c + 1) + movementScale * u[cornerIndexCol[r + 1][c + 1] - 1]));
              ctx.lineTo(...coordsToView(r + movementScale * u[cornerIndexRow[r][c + 1] - 1], (c + 1) + movementScale * u[cornerIndexCol[r][c + 1] - 1]));
              ctx.closePath();
              ctx.stroke();
            }
          }
        }

        ctx.strokeStyle = '#C00';
        const supportSize = 0.2;
        ctx.beginPath();
        ctx.moveTo(...coordsToView(supports.SupportRow1.row, supports.SupportRow1.col - supportSize));
        ctx.lineTo(...coordsToView(supports.SupportRow1.row, supports.SupportRow1.col + supportSize));
        ctx.closePath();
        ctx.stroke();
        ctx.beginPath();
        ctx.moveTo(...coordsToView(supports.SupportRow2.row, supports.SupportRow2.col - supportSize));
        ctx.lineTo(...coordsToView(supports.SupportRow2.row, supports.SupportRow2.col + supportSize));
        ctx.closePath();
        ctx.stroke();
        ctx.beginPath();
        ctx.moveTo(...coordsToView(supports.SupportCol.row - supportSize, supports.SupportCol.col));
        ctx.lineTo(...coordsToView(supports.SupportCol.row + supportSize, supports.SupportCol.col));
        ctx.closePath();
        ctx.stroke();
      }
    </script>
    <style type="text/css">
    </style>
  </head>
  <body onload="draw();">
    <canvas id="tutorial" width="1000" height="1000"></canvas>
  </body>
</html>